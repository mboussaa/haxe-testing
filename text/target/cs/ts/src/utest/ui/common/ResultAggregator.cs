// Generated by Haxe 3.3.0

#pragma warning disable 109, 114, 219, 429, 168, 162
namespace utest.ui.common {
	public class ResultAggregator : global::haxe.lang.HxObject {
		
		public ResultAggregator(global::haxe.lang.EmptyObject empty) {
		}
		
		
		public ResultAggregator(global::utest.Runner runner, global::haxe.lang.Null<bool> flattenPackage) {
			global::utest.ui.common.ResultAggregator.__hx_ctor_utest_ui_common_ResultAggregator(this, runner, flattenPackage);
		}
		
		
		public static void __hx_ctor_utest_ui_common_ResultAggregator(global::utest.ui.common.ResultAggregator __temp_me204, global::utest.Runner runner, global::haxe.lang.Null<bool> flattenPackage) {
			bool __temp_flattenPackage203 = ( ( ! (flattenPackage.hasValue) ) ? (false) : ((flattenPackage).@value) );
			if (( runner == null )) {
				throw global::haxe.lang.HaxeException.wrap("runner argument is null");
			}
			
			__temp_me204.flattenPackage = __temp_flattenPackage203;
			__temp_me204.runner = runner;
			runner.onStart.@add(((global::haxe.lang.Function) (new global::haxe.lang.Closure(__temp_me204, "start", 67859554)) ));
			runner.onProgress.@add(((global::haxe.lang.Function) (new global::haxe.lang.Closure(__temp_me204, "progress", 103479213)) ));
			runner.onComplete.@add(((global::haxe.lang.Function) (new global::haxe.lang.Closure(__temp_me204, "complete", 2143813817)) ));
			__temp_me204.onStart = new global::utest.Notifier();
			__temp_me204.onComplete = new global::utest.Dispatcher<object>();
			__temp_me204.onProgress = new global::utest.Dispatcher<object>();
		}
		
		
		public static new object __hx_createEmpty() {
			return new global::utest.ui.common.ResultAggregator(global::haxe.lang.EmptyObject.EMPTY);
		}
		
		
		public static new object __hx_create(global::Array arr) {
			unchecked {
				return new global::utest.ui.common.ResultAggregator(((global::utest.Runner) (arr[0]) ), global::haxe.lang.Null<object>.ofDynamic<bool>(arr[1]));
			}
		}
		
		
		public global::utest.Runner runner;
		
		public bool flattenPackage;
		
		public global::utest.ui.common.PackageResult root;
		
		public global::utest.Notifier onStart;
		
		public global::utest.Dispatcher<object> onComplete;
		
		public global::utest.Dispatcher<object> onProgress;
		
		public virtual void start(global::utest.Runner runner) {
			this.root = new global::utest.ui.common.PackageResult(((string) (null) ));
			this.onStart.dispatch();
		}
		
		
		public virtual global::utest.ui.common.PackageResult getOrCreatePackage(string pack, bool flat, global::utest.ui.common.PackageResult @ref) {
			if (( @ref == null )) {
				@ref = this.root;
			}
			
			if (( string.Equals(pack, null) || string.Equals(pack, "") )) {
				return @ref;
			}
			
			if (flat) {
				if (@ref.existsPackage(pack)) {
					return @ref.getPackage(pack);
				}
				
				global::utest.ui.common.PackageResult p = new global::utest.ui.common.PackageResult(((string) (pack) ));
				@ref.addPackage(p);
				return p;
			}
			else {
				global::Array<object> parts = global::haxe.lang.StringExt.split(pack, ".");
				{
					int _g = 0;
					while (( _g < parts.length )) {
						string part = global::haxe.lang.Runtime.toString(parts[_g]);
						 ++ _g;
						@ref = this.getOrCreatePackage(part, true, @ref);
					}
					
				}
				
				return @ref;
			}
			
		}
		
		
		public virtual global::utest.ui.common.ClassResult getOrCreateClass(global::utest.ui.common.PackageResult pack, string cls, string setup, string teardown) {
			if (pack.existsClass(cls)) {
				return pack.getClass(cls);
			}
			
			global::utest.ui.common.ClassResult c = new global::utest.ui.common.ClassResult(cls, setup, teardown);
			pack.addClass(c);
			return c;
		}
		
		
		public virtual global::utest.ui.common.FixtureResult createFixture(global::utest.TestResult result) {
			global::utest.ui.common.FixtureResult f = new global::utest.ui.common.FixtureResult(((string) (result.method) ));
			{
				global::_List.ListNode<object> _g_head = result.assertations.h;
				while (( _g_head != null )) {
					global::utest.Assertation val = ((global::utest.Assertation) (_g_head.item) );
					_g_head = _g_head.next;
					f.@add(val);
				}
				
			}
			
			return f;
		}
		
		
		public virtual void progress(object e) {
			this.root.addResult(((global::utest.TestResult) (global::haxe.lang.Runtime.getField(e, "result", 142895325, true)) ), this.flattenPackage);
			this.onProgress.dispatch(e);
		}
		
		
		public virtual void complete(global::utest.Runner runner) {
			this.onComplete.dispatch(this.root);
		}
		
		
		public override object __hx_setField(string field, int hash, object @value, bool handleProperties) {
			unchecked {
				switch (hash) {
					case 1675742188:
					{
						this.onProgress = ((global::utest.Dispatcher<object>) (global::utest.Dispatcher<object>.__hx_cast<object>(((global::utest.Dispatcher) (@value) ))) );
						return @value;
					}
					
					
					case 1568593144:
					{
						this.onComplete = ((global::utest.Dispatcher<object>) (global::utest.Dispatcher<object>.__hx_cast<object>(((global::utest.Dispatcher) (@value) ))) );
						return @value;
					}
					
					
					case 440996547:
					{
						this.onStart = ((global::utest.Notifier) (@value) );
						return @value;
					}
					
					
					case 1269755426:
					{
						this.root = ((global::utest.ui.common.PackageResult) (@value) );
						return @value;
					}
					
					
					case 1245800482:
					{
						this.flattenPackage = global::haxe.lang.Runtime.toBool(@value);
						return @value;
					}
					
					
					case 999967216:
					{
						this.runner = ((global::utest.Runner) (@value) );
						return @value;
					}
					
					
					default:
					{
						return base.__hx_setField(field, hash, @value, handleProperties);
					}
					
				}
				
			}
		}
		
		
		public override object __hx_getField(string field, int hash, bool throwErrors, bool isCheck, bool handleProperties) {
			unchecked {
				switch (hash) {
					case 2143813817:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "complete", 2143813817)) );
					}
					
					
					case 103479213:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "progress", 103479213)) );
					}
					
					
					case 1516540973:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "createFixture", 1516540973)) );
					}
					
					
					case 1172057283:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "getOrCreateClass", 1172057283)) );
					}
					
					
					case 1861441745:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "getOrCreatePackage", 1861441745)) );
					}
					
					
					case 67859554:
					{
						return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "start", 67859554)) );
					}
					
					
					case 1675742188:
					{
						return this.onProgress;
					}
					
					
					case 1568593144:
					{
						return this.onComplete;
					}
					
					
					case 440996547:
					{
						return this.onStart;
					}
					
					
					case 1269755426:
					{
						return this.root;
					}
					
					
					case 1245800482:
					{
						return this.flattenPackage;
					}
					
					
					case 999967216:
					{
						return this.runner;
					}
					
					
					default:
					{
						return base.__hx_getField(field, hash, throwErrors, isCheck, handleProperties);
					}
					
				}
				
			}
		}
		
		
		public override object __hx_invokeField(string field, int hash, global::Array dynargs) {
			unchecked {
				switch (hash) {
					case 2143813817:
					{
						this.complete(((global::utest.Runner) (dynargs[0]) ));
						break;
					}
					
					
					case 103479213:
					{
						this.progress(dynargs[0]);
						break;
					}
					
					
					case 1516540973:
					{
						return this.createFixture(((global::utest.TestResult) (dynargs[0]) ));
					}
					
					
					case 1172057283:
					{
						return this.getOrCreateClass(((global::utest.ui.common.PackageResult) (dynargs[0]) ), global::haxe.lang.Runtime.toString(dynargs[1]), global::haxe.lang.Runtime.toString(dynargs[2]), global::haxe.lang.Runtime.toString(dynargs[3]));
					}
					
					
					case 1861441745:
					{
						return this.getOrCreatePackage(global::haxe.lang.Runtime.toString(dynargs[0]), global::haxe.lang.Runtime.toBool(dynargs[1]), ((global::utest.ui.common.PackageResult) (dynargs[2]) ));
					}
					
					
					case 67859554:
					{
						this.start(((global::utest.Runner) (dynargs[0]) ));
						break;
					}
					
					
					default:
					{
						return base.__hx_invokeField(field, hash, dynargs);
					}
					
				}
				
				return null;
			}
		}
		
		
		public override void __hx_getFields(global::Array<object> baseArr) {
			baseArr.push("onProgress");
			baseArr.push("onComplete");
			baseArr.push("onStart");
			baseArr.push("root");
			baseArr.push("flattenPackage");
			baseArr.push("runner");
			{
				base.__hx_getFields(baseArr);
			}
			
		}
		
		
	}
}


